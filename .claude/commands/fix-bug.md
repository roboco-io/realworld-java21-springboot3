---
description: 버그 수정 워크플로우
---

버그를 분석하고 수정합니다.

## 1. 버그 재현
사용자에게 다음을 질문:
- 버그 증상
- 재현 방법
- 에러 메시지 (있다면)
- 발생 환경

## 2. 원인 분석
1. **에러 스택 트레이스 분석**
   - P6Spy 로그 확인 (SQL 쿼리)
   - 애플리케이션 로그 확인

2. **관련 코드 검토**
   - 문제 발생 지점 파악
   - 연관된 레이어 확인 (Controller → Service → Repository)

3. **근본 원인 파악**
   - 잘못된 비즈니스 로직
   - 누락된 검증
   - 데이터베이스 이슈
   - 동시성 문제

## 3. 수정 계획
- 최소 변경 원칙
- 영향 범위 분석
- 사이드 이펙트 확인

## 4. 수정 구현
`.claude/rules.md` 규칙 준수:
- 적절한 예외 처리
- 입력 검증 추가
- 로깅 개선

## 5. 회귀 테스트
1. **버그 재현 테스트 작성**
   ```java
   @Test
   void bugDescription_scenario_shouldNotFail() {
       // 버그 재현 및 수정 검증
   }
   ```

2. **기존 테스트 실행**
   ```bash
   ./gradlew test
   ```

3. **관련 기능 수동 테스트**

## 6. 검증
- `/review` 명령어로 코드 리뷰
- 다른 기능에 영향 없는지 확인

## 7. 문서화
- 버그 원인 주석 추가
- 필요시 CLAUDE.md 업데이트
