# Claude Code 프로젝트 설정

이 디렉토리는 Claude Code의 프로젝트별 설정과 커스텀 명령어를 포함합니다.

## 파일 구조

```
.claude/
├── README.md           # 이 파일
├── rules.md            # 프로젝트 작업 규칙
└── commands/           # 커스텀 명령어
    ├── review.md       # 코드 리뷰 명령어
    ├── test.md         # 테스트 생성/실행 명령어
    ├── new-feature.md  # 새 기능 추가 워크플로우
    ├── fix-bug.md      # 버그 수정 워크플로우
    └── refactor.md     # 리팩토링 워크플로우
```

## 사용 가능한 커스텀 명령어

### `/review` - 코드 리뷰
프로젝트 규칙 준수 여부를 검증합니다.

**검증 항목:**
- 코딩 표준 (Lombok, 명명 규칙)
- 아키텍처 규칙 (모듈 의존성, 레이어 분리)
- 테스트 규칙 (네이밍, 패턴, 예외 검증)
- 보안 (비밀번호 평문, 민감 정보 로깅)
- 성능 (N+1 쿼리, EAGER 로딩)

**사용 예시:**
```
/review
```

### `/test` - 테스트 생성 및 실행
테스트 코드를 생성하고 실행합니다.

**기능:**
- 프로젝트 규칙에 맞는 테스트 코드 생성
- `./gradlew test` 자동 실행
- 커버리지 확인 및 개선 제안

**사용 예시:**
```
/test UserService의 signup 메서드 테스트를 작성해줘
```

### `/new-feature` - 새 기능 추가
새로운 기능을 체계적으로 추가합니다.

**워크플로우:**
1. 요구사항 확인
2. 설계
3. Core → Persistence → API 순서로 구현
4. 테스트 작성
5. 코드 포맷팅
6. 최종 검증

**사용 예시:**
```
/new-feature 사용자가 게시글에 북마크를 추가하는 기능을 만들어줘
```

### `/fix-bug` - 버그 수정
버그를 체계적으로 분석하고 수정합니다.

**워크플로우:**
1. 버그 재현
2. 원인 분석
3. 수정 계획
4. 수정 구현
5. 회귀 테스트
6. 검증

**사용 예시:**
```
/fix-bug 로그인 시 비밀번호가 틀려도 성공하는 문제를 수정해줘
```

### `/refactor` - 리팩토링
코드를 개선합니다.

**리팩토링 유형:**
- 메서드 추출
- 매직 넘버 제거
- 조건문 단순화
- 중복 코드 제거

**사용 예시:**
```
/refactor UserService의 updateUserDetails 메서드를 리팩토링해줘
```

## 작업 규칙 파일

### `rules.md`
프로젝트의 모든 작업 규칙을 정의합니다.

**주요 섹션:**
- 코딩 표준 (Java, Lombok, 명명 규칙)
- 아키텍처 규칙 (모듈 의존성, 레이어 분리)
- 테스트 규칙 (네이밍, 패턴, 예외 검증)
- 데이터베이스 규칙 (ID 전략, JPA 엔티티)
- API 설계 규칙 (REST, DTO)
- 보안 규칙 (JWT, 비밀번호)
- Git 커밋 규칙
- 성능 최적화 규칙
- 문서화 규칙
- 에러 처리 규칙

**Claude Code는 자동으로 이 파일을 참조합니다.**

## 커스텀 명령어 작성 가이드

### 기본 구조
```markdown
---
description: 명령어 설명 (한 줄)
---

명령어 실행 시 Claude Code에게 전달될 프롬프트 내용
```

### 예시
`.claude/commands/my-command.md`:
```markdown
---
description: 내 커스텀 작업 수행
---

다음 작업을 수행해주세요:

1. 첫 번째 단계
2. 두 번째 단계
3. 세 번째 단계

규칙: `.claude/rules.md`를 준수하세요.
```

사용:
```
/my-command
```

## 규칙 파일 vs CLAUDE.md

### `.claude/rules.md` (작업 규칙)
- **목적**: 코딩 표준, 워크플로우, 프로세스
- **내용**: "어떻게 작업해야 하는가"
- **대상**: Claude Code의 작업 지침

### `CLAUDE.md` (프로젝트 가이드)
- **목적**: 프로젝트 구조, 명령어, 아키텍처 설명
- **내용**: "프로젝트가 어떻게 구성되어 있는가"
- **대상**: Claude Code 인스턴스에게 프로젝트 소개

### 모듈별 CLAUDE.md
- **목적**: 각 모듈의 상세 구조와 사용법
- **내용**: 모듈별 클래스, 패턴, 테스트 방법
- **대상**: 해당 모듈에서 작업하는 Claude Code

## 팁

1. **커스텀 명령어 체인**
   ```
   /new-feature [기능 설명]
   → 구현 완료 후
   /test
   → 테스트 완료 후
   /review
   ```

2. **규칙 파일 활용**
   - 커스텀 명령어에서 `.claude/rules.md`를 참조
   - 일관된 코드 품질 유지

3. **명령어 수정**
   - `.claude/commands/` 파일을 직접 수정 가능
   - Claude Code 재시작 불필요 (즉시 반영)

## 참조

- 전체 프로젝트 가이드: `/CLAUDE.md`
- 도메인 레이어: `/module/core/CLAUDE.md`
- 데이터 접근 레이어: `/module/persistence/CLAUDE.md`
- API 레이어: `/server/api/CLAUDE.md`
